import { Moon, Sun, Settings, Cpu } from 'lucide-react'

export default function TopBar({ theme, onToggleTheme, onOpenSettings, defaultProvider, defaultModel }) {
  // Format provider name for display
  const formatProvider = (provider) => {
    if (!provider) return 'Not configured'
    return provider
      .split('_')
      .map(word => word.charAt(0).toUpperCase() + word.slice(1))
      .join(' ')
  }

  return (
    <div 
      className="h-12 flex items-center justify-between px-4"
      style={{ 
        background: 'var(--bg-secondary)', 
        borderBottom: '1px solid var(--border-color)' 
      }}
    >
      {/* Left: Logo and Title */}
      <div className="flex items-center gap-3">
        <div className="w-7 h-7">
          <svg viewBox="0 0 335 335" className="w-full h-full">
            <path fill="#6B46C1" d="M 274.60 335.00 L 264.05 335.00 Q 263.38 334.70 262.46 334.70 Q 261.84 334.28 261.58 333.66 C 251.75 311.03 219.34 303.79 197.77 302.30 Q 169.69 300.37 139.05 302.32 C 120.42 303.50 97.77 308.82 84.18 321.18 Q 78.14 326.67 74.99 333.75 Q 74.76 334.28 74.33 334.70 Q 73.33 334.67 72.59 335.00 L 67.27 335.00 Q 65.77 334.65 64.33 335.00 L 62.82 335.00 C 60.23 334.44 60.50 332.04 60.52 329.53 A 3.70 3.57 54.6 0 1 60.68 328.46 Q 62.24 323.34 64.71 320.19 C 71.56 311.46 79.72 305.89 90.71 300.97 Q 100.72 296.49 115.65 293.39 C 117.81 292.94 119.19 292.25 121.52 292.62 A 0.39 0.38 -26.7 0 0 121.76 291.90 C 119.16 290.59 116.08 290.61 113.76 290.09 Q 99.84 287.00 87.34 278.93 C 82.25 275.64 79.11 272.68 74.48 268.09 Q 60.78 254.51 55.03 235.23 Q 54.63 233.89 54.37 232.01 A 1.68 1.67 86.7 0 0 52.76 230.57 Q 51.06 230.51 49.67 230.09 Q 32.43 224.83 28.50 206.99 A 0.24 0.08 63.4 0 1 28.49 206.92 L 28.49 171.31 A 1.01 0.86 -40.3 0 1 28.54 171.01 C 29.41 168.49 29.57 166.32 30.97 163.61 Q 38.01 149.94 53.23 147.27 A 1.17 1.15 2.3 0 0 54.15 146.43 C 61.75 117.90 82.64 97.72 111.24 90.56 C 115.00 89.62 118.47 89.58 121.97 88.78 A 10.28 10.19 38.4 0 1 124.22 88.53 L 159.80 88.53 A 0.78 0.77 90.0 0 0 160.57 87.75 L 160.57 68.27 A 1.16 1.15 -83.8 0 0 159.67 67.14 C 148.23 64.59 139.45 54.32 136.75 43.31 Q 136.24 41.25 136.41 34.39 Q 136.54 29.07 137.75 25.59 Q 142.83 10.90 158.01 5.55 Q 164.57 3.24 171.28 3.56 A 3.45 3.42 -34.9 0 1 172.14 3.71 C 174.68 4.46 176.63 4.45 179.15 5.42 Q 200.33 13.64 201.32 37.21 C 201.39 38.89 200.72 41.05 200.41 42.79 C 198.39 54.36 189.03 63.63 178.12 67.25 A 1.24 1.24 0.0 0 0 177.27 68.43 L 177.27 87.35 A 1.18 1.18 0.0 0 0 178.45 88.53 Q 202.53 88.51 210.02 88.51 C 213.59 88.51 217.40 89.25 220.74 89.82 Q 236.85 92.58 249.15 100.11 C 254.87 103.61 261.65 108.81 266.38 114.38 Q 278.54 128.69 283.66 146.88 A 0.82 0.82 0.0 0 0 284.38 147.48 Q 287.62 147.81 290.32 148.99 Q 302.66 154.35 307.04 166.60 Q 308.50 170.68 308.50 176.99 Q 308.50 196.23 308.38 207.28 A 4.24 4.08 -39.2 0 1 308.26 208.27 Q 304.07 225.58 287.12 230.47 A 1.86 1.83 -50.8 0 1 286.49 230.54 L 284.37 230.42 A 0.77 0.77 0.0 0 0 283.58 230.99 Q 279.10 248.61 267.66 262.68 Q 266.01 264.71 260.12 270.46 C 249.74 280.60 236.30 287.53 222.35 290.46 A 3.84 3.67 36.9 0 1 221.68 290.54 Q 218.79 290.62 215.80 291.71 A 0.33 0.33 0.0 0 0 215.85 292.35 Q 222.76 293.65 231.46 295.85 Q 250.14 300.58 265.49 313.23 Q 273.20 319.59 275.39 327.63 Q 276.51 331.73 274.60 335.00 Z"/>
            <circle fill="#9F7AEA" cx="168.77" cy="36.13" r="17.47"/>
            <path fill="#9F7AEA" d="M 168.44 102.37 Q 182.48 102.34 196.58 102.35 Q 215.61 102.37 222.92 104.06 C 247.07 109.63 265.21 128.35 270.56 152.38 Q 272.38 160.55 272.16 174.32 Q 272.04 181.67 272.16 212.01 C 272.27 240.60 251.26 269.12 222.75 274.62 Q 218.71 275.40 208.70 275.43 Q 173.55 275.56 168.89 275.57 Q 164.24 275.58 129.09 275.64 Q 119.08 275.66 115.04 274.90 C 86.50 269.55 65.34 241.14 65.30 212.55 Q 65.26 182.21 65.10 174.86 Q 64.81 161.10 66.58 152.92 C 71.81 128.86 89.85 110.04 113.97 104.35 Q 121.27 102.62 140.30 102.50 Q 154.40 102.41 168.44 102.37 Z"/>
            <ellipse fill="#6B46C1" cx="121.44" cy="172.53" rx="28.25" ry="27.50" transform="rotate(86.9, 121.44, 172.53)"/>
            <ellipse fill="#6B46C1" cx="213.69" cy="172.56" rx="28.19" ry="27.73" transform="rotate(93.5, 213.69, 172.56)"/>
            <path fill="#9F7AEA" d="M 50.50 213.05 A 0.04 0.04 0.0 0 1 50.46 213.09 L 50.37 213.09 A 13.92 6.95 89.9 0 1 43.40 199.19 L 43.36 178.73 A 13.92 6.95 89.9 0 1 50.29 164.79 L 50.38 164.79 A 0.04 0.04 0.0 0 1 50.42 164.83 L 50.50 213.05 Z"/>
            <path fill="#9F7AEA" d="M 287.14 165.68 A 0.12 0.12 0.0 0 1 287.26 165.56 L 287.28 165.56 A 13.52 6.38 90.0 0 1 293.66 179.08 L 293.66 198.92 A 13.52 6.38 -90.0 0 1 287.28 212.44 L 287.26 212.44 A 0.12 0.12 0.0 0 1 287.14 212.32 L 287.14 165.68 Z"/>
            <path fill="#6B46C1" d="M 168.18 233.78 C 177.29 233.79 187.30 230.98 193.52 224.38 Q 197.01 220.66 198.39 220.17 Q 202.50 218.71 206.14 221.64 A 3.54 3.52 -87.7 0 1 206.92 222.49 C 212.13 230.38 202.52 238.48 196.03 242.13 C 187.51 246.91 177.86 249.08 168.16 249.07 C 158.45 249.05 148.81 246.86 140.30 242.04 C 133.82 238.38 124.24 230.25 129.47 222.37 A 3.54 3.52 87.9 0 1 130.25 221.53 Q 133.90 218.61 138.01 220.08 Q 139.39 220.57 142.87 224.30 C 149.07 230.92 159.07 233.77 168.18 233.78 Z"/>
            <path fill="#9F7AEA" d="M 262.46 334.70 Q 262.30 334.82 262.23 335.00 L 74.78 335.00 Q 74.52 334.90 74.33 334.70 Q 74.76 334.28 74.99 333.75 Q 78.14 326.67 84.18 321.18 C 97.77 308.82 120.42 303.50 139.05 302.32 Q 169.69 300.37 197.77 302.30 C 219.34 303.79 251.75 311.03 261.58 333.66 Q 261.84 334.28 262.46 334.70 Z"/>
          </svg>
        </div>
        <span className="text-lg font-semibold" style={{ color: 'var(--text-primary)' }}>
          Astonish Studio
        </span>
      </div>

      {/* Center: Provider & Model Display */}
      {(defaultProvider || defaultModel) && (
        <div 
          className="flex items-center gap-2 px-3 py-1 rounded-lg"
          style={{ background: 'var(--bg-primary)' }}
        >
          <Cpu size={16} className="text-purple-400" />
          <div className="flex flex-col leading-tight">
            <span className="text-xs font-medium" style={{ color: 'var(--text-muted)' }}>
              {formatProvider(defaultProvider)}
            </span>
            <span className="text-xs font-mono" style={{ color: 'var(--text-secondary)' }}>
              {defaultModel || 'No model set'}
            </span>
          </div>
        </div>
      )}

      {/* Right: Theme Toggle and Settings */}
      <div className="flex items-center gap-2">
        {/* Theme Toggle */}
        <button
          onClick={onToggleTheme}
          className="p-2 rounded-lg transition-colors hover:bg-purple-500/20"
          title={theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'}
        >
          {theme === 'dark' ? (
            <Sun size={18} className="text-yellow-400" />
          ) : (
            <Moon size={18} className="text-gray-500" />
          )}
        </button>

        {/* Settings Button */}
        <button
          onClick={onOpenSettings}
          className="p-2 rounded-lg transition-colors hover:bg-purple-500/20"
          title="Settings"
          style={{ color: 'var(--text-muted)' }}
        >
          <Settings size={18} />
        </button>
      </div>
    </div>
  )
}

