"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2596],{11:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"tutorials/using-tools","title":"Using Tools","description":"This tutorial will guide you through the process of using tools in Astonish agents, from basic built-in tools to advanced MCP tools.","source":"@site/docs/tutorials/using-tools.md","sourceDirName":"tutorials","slug":"/tutorials/using-tools","permalink":"/astonish/docs/tutorials/using-tools","draft":false,"unlisted":false,"editUrl":"https://github.com/schardosin/astonish/tree/main/docs/docs/tutorials/using-tools.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Creating Agents","permalink":"/astonish/docs/tutorials/creating-agents"},"next":{"title":"Advanced Flows","permalink":"/astonish/docs/tutorials/advanced-flows"}}');var o=t(4848),i=t(8453);const l={sidebar_position:2},r="Using Tools",a={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Understanding Tools in Astonish",id:"understanding-tools-in-astonish",level:2},{value:"Using Built-in Tools",id:"using-built-in-tools",level:2},{value:"Reading Files",id:"reading-files",level:3},{value:"Writing Files",id:"writing-files",level:3},{value:"Executing Shell Commands",id:"executing-shell-commands",level:3},{value:"Validating YAML",id:"validating-yaml",level:3},{value:"Tool Approval",id:"tool-approval",level:2},{value:"Using MCP Tools",id:"using-mcp-tools",level:2},{value:"Configuring MCP Servers",id:"configuring-mcp-servers",level:3},{value:"Using MCP Tools in Agents",id:"using-mcp-tools-in-agents",level:3},{value:"Example: File Processing Agent",id:"example-file-processing-agent",level:2},{value:"Example: Web Research Agent with MCP Tools",id:"example-web-research-agent-with-mcp-tools",level:2},{value:"Combining Multiple Tools",id:"combining-multiple-tools",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Tool Not Found",id:"tool-not-found",level:3},{value:"Permission Denied",id:"permission-denied",level:3},{value:"Tool Execution Failed",id:"tool-execution-failed",level:3},{value:"MCP Server Not Connected",id:"mcp-server-not-connected",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"using-tools",children:"Using Tools"})}),"\n",(0,o.jsx)(n.p,{children:"This tutorial will guide you through the process of using tools in Astonish agents, from basic built-in tools to advanced MCP tools."}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsx)(n.p,{children:"Before you begin, make sure you have:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/getting-started/installation",children:"Installed Astonish"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/getting-started/configuration",children:"Configured an AI provider"})}),"\n",(0,o.jsxs)(n.li,{children:["Basic understanding of ",(0,o.jsx)(n.a,{href:"/docs/concepts/agentic-flows",children:"Agentic Flows"})," and ",(0,o.jsx)(n.a,{href:"/docs/concepts/tools",children:"Tools"})]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"understanding-tools-in-astonish",children:"Understanding Tools in Astonish"}),"\n",(0,o.jsx)(n.p,{children:"Tools in Astonish allow agents to interact with external systems and perform actions beyond simple text generation. They enable agents to:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Read and write files"}),"\n",(0,o.jsx)(n.li,{children:"Execute shell commands"}),"\n",(0,o.jsx)(n.li,{children:"Validate YAML content"}),"\n",(0,o.jsx)(n.li,{children:"Perform web searches (via MCP)"}),"\n",(0,o.jsx)(n.li,{children:"And much more, depending on the available tools"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"using-built-in-tools",children:"Using Built-in Tools"}),"\n",(0,o.jsx)(n.p,{children:"Astonish comes with several built-in tools that are always available:"}),"\n",(0,o.jsx)(n.h3,{id:"reading-files",children:"Reading Files"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"read_file"})," tool allows agents to read the contents of files:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"- name: read_document\n  type: llm\n  system: |\n    You are a file reading assistant.\n  prompt: |\n    Read the contents of the file at path: {file_path}\n  output_model:\n    file_content: str\n  tools: true\n  tools_selection:\n    - read_file\n"})}),"\n",(0,o.jsx)(n.p,{children:"When this node is executed, the AI model will:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Recognize that it needs to read a file"}),"\n",(0,o.jsxs)(n.li,{children:["Use the ",(0,o.jsx)(n.code,{children:"read_file"})," tool with the file path from the prompt"]}),"\n",(0,o.jsxs)(n.li,{children:["Store the file contents in the ",(0,o.jsx)(n.code,{children:"file_content"})," variable"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"writing-files",children:"Writing Files"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"write_file"})," tool allows agents to write content to files:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"- name: save_summary\n  type: llm\n  system: |\n    You are a file writing assistant.\n  prompt: |\n    Save the following summary to a file:\n    {summary}\n    \n    File path: {output_path}\n  output_model:\n    save_result: str\n  tools: true\n  tools_selection:\n    - write_file\n"})}),"\n",(0,o.jsx)(n.p,{children:"When this node is executed, the AI model will:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Recognize that it needs to write to a file"}),"\n",(0,o.jsxs)(n.li,{children:["Use the ",(0,o.jsx)(n.code,{children:"write_file"})," tool with the file path and content"]}),"\n",(0,o.jsxs)(n.li,{children:["Store the result message in the ",(0,o.jsx)(n.code,{children:"save_result"})," variable"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"executing-shell-commands",children:"Executing Shell Commands"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"shell_command"})," tool allows agents to execute shell commands:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"- name: list_files\n  type: llm\n  system: |\n    You are a system command assistant.\n  prompt: |\n    List the files in the directory: {directory_path}\n  output_model:\n    file_list: str\n  tools: true\n  tools_selection:\n    - shell_command\n"})}),"\n",(0,o.jsx)(n.p,{children:"When this node is executed, the AI model will:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Recognize that it needs to execute a shell command"}),"\n",(0,o.jsxs)(n.li,{children:["Use the ",(0,o.jsx)(n.code,{children:"shell_command"})," tool with the appropriate command (e.g., ",(0,o.jsx)(n.code,{children:"ls {directory_path}"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:["Store the command output in the ",(0,o.jsx)(n.code,{children:"file_list"})," variable"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"validating-yaml",children:"Validating YAML"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"validate_yaml_with_schema"})," tool allows agents to validate YAML content against a schema:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"- name: validate_config\n  type: llm\n  system: |\n    You are a YAML validation assistant.\n  prompt: |\n    Validate the following YAML configuration against the schema:\n    \n    Configuration:\n    {yaml_content}\n    \n    Schema:\n    {yaml_schema}\n  output_model:\n    validation_result: str\n  tools: true\n  tools_selection:\n    - validate_yaml_with_schema\n"})}),"\n",(0,o.jsx)(n.p,{children:"When this node is executed, the AI model will:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Recognize that it needs to validate YAML"}),"\n",(0,o.jsxs)(n.li,{children:["Use the ",(0,o.jsx)(n.code,{children:"validate_yaml_with_schema"})," tool with the YAML content and schema"]}),"\n",(0,o.jsxs)(n.li,{children:["Store the validation results in the ",(0,o.jsx)(n.code,{children:"validation_result"})," variable"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"tool-approval",children:"Tool Approval"}),"\n",(0,o.jsx)(n.p,{children:"By default, tool usage requires user approval. This means that when an AI model wants to use a tool, the user will be prompted to approve or deny the tool usage."}),"\n",(0,o.jsxs)(n.p,{children:["You can configure automatic approval for tools using the ",(0,o.jsx)(n.code,{children:"tools_auto_approval"})," field:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"- name: read_file_node\n  type: llm\n  prompt: |\n    Read the file at path: {file_path}\n  output_model:\n    file_content: str\n  tools: true\n  tools_selection:\n    - read_file\n  tools_auto_approval: true  # Tools will be used without user approval\n"})}),"\n",(0,o.jsx)(n.h2,{id:"using-mcp-tools",children:"Using MCP Tools"}),"\n",(0,o.jsx)(n.p,{children:"MCP (Model Context Protocol) tools extend the capabilities of Astonish by connecting to external services. To use MCP tools:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Configure the MCP server in the MCP configuration file"}),"\n",(0,o.jsx)(n.li,{children:"Enable the tools in your agent's YAML configuration"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"configuring-mcp-servers",children:"Configuring MCP Servers"}),"\n",(0,o.jsxs)(n.p,{children:["To configure an MCP server, use the ",(0,o.jsx)(n.code,{children:"astonish tools edit"})," command to open the MCP configuration file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"astonish tools edit\n"})}),"\n",(0,o.jsx)(n.p,{children:"Add your MCP server configuration:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "tavily": {\n      "command": "node",\n      "args": ["/path/to/tavily-server.js"],\n      "env": {\n        "TAVILY_API_KEY": "your-api-key"\n      }\n    }\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"using-mcp-tools-in-agents",children:"Using MCP Tools in Agents"}),"\n",(0,o.jsx)(n.p,{children:"Once you've configured an MCP server, you can use its tools in your agents:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"- name: search_web\n  type: llm\n  system: |\n    You are a web search assistant.\n  prompt: |\n    Search the web for information about: {search_query}\n  output_model:\n    search_results: str\n  tools: true\n  tools_selection:\n    - tavily_search  # An MCP tool for web search\n"})}),"\n",(0,o.jsx)(n.h2,{id:"example-file-processing-agent",children:"Example: File Processing Agent"}),"\n",(0,o.jsx)(n.p,{children:"Here's an example of an agent that reads a file, processes its content, and writes the results to a new file:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"description: File processing agent that reads, processes, and writes files\nnodes:\n  - name: get_input_file\n    type: input\n    prompt: |\n      Please enter the path to the input file:\n    output_model:\n      input_file: str\n\n  - name: get_output_file\n    type: input\n    prompt: |\n      Please enter the path for the output file:\n    output_model:\n      output_file: str\n\n  - name: read_input_file\n    type: llm\n    system: |\n      You are a file reading assistant.\n    prompt: |\n      Read the contents of the file at path: {input_file}\n    output_model:\n      file_content: str\n    tools: true\n    tools_selection:\n      - read_file\n\n  - name: process_content\n    type: llm\n    system: |\n      You are a text processing expert.\n    prompt: |\n      Process the following content:\n      \n      {file_content}\n      \n      Extract all dates in the format YYYY-MM-DD and create a list.\n    output_model:\n      processed_content: str\n\n  - name: write_output_file\n    type: llm\n    system: |\n      You are a file writing assistant.\n    prompt: |\n      Write the following content to the file at path: {output_file}\n      \n      {processed_content}\n    output_model:\n      write_result: str\n    tools: true\n    tools_selection:\n      - write_file\n    user_message:\n      - write_result\n\nflow:\n  - from: START\n    to: get_input_file\n  - from: get_input_file\n    to: get_output_file\n  - from: get_output_file\n    to: read_input_file\n  - from: read_input_file\n    to: process_content\n  - from: process_content\n    to: write_output_file\n  - from: write_output_file\n    to: END\n"})}),"\n",(0,o.jsx)(n.h2,{id:"example-web-research-agent-with-mcp-tools",children:"Example: Web Research Agent with MCP Tools"}),"\n",(0,o.jsx)(n.p,{children:"Here's an example of an agent that uses MCP tools to perform web research:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"description: Web research agent using MCP tools\nnodes:\n  - name: get_research_topic\n    type: input\n    prompt: |\n      What topic would you like to research?\n    output_model:\n      research_topic: str\n\n  - name: search_web\n    type: llm\n    system: |\n      You are a research assistant that performs high-quality web searches.\n    prompt: |\n      Search the web for information about: {research_topic}\n      \n      Return a list of search results with titles and snippets.\n    output_model:\n      search_results: list\n    tools: true\n    tools_selection:\n      - tavily_search\n    tools_auto_approval: false\n\n  - name: generate_summary\n    type: llm\n    system: |\n      You are a summarization expert.\n    prompt: |\n      Create a comprehensive summary about {research_topic} based on these search results:\n      \n      {search_results}\n      \n      The summary should be well-structured and informative.\n    output_model:\n      summary: str\n    user_message:\n      - summary\n\nflow:\n  - from: START\n    to: get_research_topic\n  - from: get_research_topic\n    to: search_web\n  - from: search_web\n    to: generate_summary\n  - from: generate_summary\n    to: END\n"})}),"\n",(0,o.jsx)(n.h2,{id:"combining-multiple-tools",children:"Combining Multiple Tools"}),"\n",(0,o.jsx)(n.p,{children:"You can enable multiple tools in a single node:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"- name: advanced_processing\n  type: llm\n  system: |\n    You are an advanced processing assistant.\n  prompt: |\n    Process the data in file: {input_file}\n    Save the results to: {output_file}\n    Execute any necessary system commands to complete the task.\n  output_model:\n    processing_result: str\n  tools: true\n  tools_selection:\n    - read_file\n    - write_file\n    - shell_command\n"})}),"\n",(0,o.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Be specific in prompts"}),": Clearly instruct the AI model on when and how to use tools"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Handle errors"}),": Consider what might happen if a tool fails and provide guidance"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Use tools judiciously"}),": Only enable tools that are necessary for the node's function"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Consider security"}),": Be careful with tools that can modify the system or access sensitive data"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Test thoroughly"}),": Test your agents with various inputs to ensure tools are used correctly"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Use tool approval"}),": Consider which tools should require user approval and which can be auto-approved"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsx)(n.h3,{id:"tool-not-found",children:"Tool Not Found"}),"\n",(0,o.jsx)(n.p,{children:'If you encounter a "Tool not found" error, check that:'}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["The tool name is spelled correctly in the ",(0,o.jsx)(n.code,{children:"tools_selection"})," array"]}),"\n",(0,o.jsx)(n.li,{children:"For MCP tools, the MCP server is properly configured and running"}),"\n",(0,o.jsxs)(n.li,{children:["For built-in tools, you're using the correct name (",(0,o.jsx)(n.code,{children:"read_file"}),", ",(0,o.jsx)(n.code,{children:"write_file"}),", ",(0,o.jsx)(n.code,{children:"shell_command"}),", or ",(0,o.jsx)(n.code,{children:"validate_yaml_with_schema"}),")"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"permission-denied",children:"Permission Denied"}),"\n",(0,o.jsx)(n.p,{children:'If you encounter a "Permission denied" error when using file tools:'}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Check that the file paths are correct"}),"\n",(0,o.jsx)(n.li,{children:"Ensure the user running Astonish has permission to read/write the specified files"}),"\n",(0,o.jsx)(n.li,{children:"For shell commands, ensure the user has permission to execute the command"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"tool-execution-failed",children:"Tool Execution Failed"}),"\n",(0,o.jsx)(n.p,{children:"If a tool execution fails:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Check the error message for specific details"}),"\n",(0,o.jsx)(n.li,{children:"Verify that the tool's input parameters are correct"}),"\n",(0,o.jsx)(n.li,{children:"For MCP tools, check that the MCP server is running and properly configured"}),"\n",(0,o.jsx)(n.li,{children:"Try running the tool manually to see if it works outside of Astonish"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"mcp-server-not-connected",children:"MCP Server Not Connected"}),"\n",(0,o.jsx)(n.p,{children:"If an MCP server is not connecting:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Check that the server is properly configured in the MCP configuration file"}),"\n",(0,o.jsx)(n.li,{children:"Verify that the server command and arguments are correct"}),"\n",(0,o.jsx)(n.li,{children:"Ensure any required environment variables are set"}),"\n",(0,o.jsx)(n.li,{children:"Check the server logs for error messages"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsx)(n.p,{children:"Now that you know how to use tools in Astonish, you can:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Learn about ",(0,o.jsx)(n.a,{href:"/docs/tutorials/advanced-flows",children:"Advanced Flows"})," for more complex agent patterns"]}),"\n",(0,o.jsxs)(n.li,{children:["Explore the ",(0,o.jsx)(n.a,{href:"/docs/api/tools/internal-tools",children:"API Reference"})," for more details on built-in tools"]}),"\n",(0,o.jsxs)(n.li,{children:["Check out the ",(0,o.jsx)(n.a,{href:"/docs/api/tools/mcp-tools",children:"MCP Tools"})," documentation for creating custom tools"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>r});var s=t(6540);const o={},i=s.createContext(o);function l(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);